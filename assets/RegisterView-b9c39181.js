import{M as H,d as J,l as Q,r as X,f as ee,o as re,h as ae,w as $,c as l,j as n,q as te,s as h,V as ie,t as ne,v as se,i as oe}from"./index-a9192726.js";import{d as le,c as ue,a as D,e as de,f as me,u as ce,b as I,V as fe}from"./index.esm-6f2d3e6c.js";import{v as z,V as ve}from"./index-bbf68b1f.js";import{V as ge,a as Ce}from"./VRow-50e00e25.js";import{V as Z}from"./VCol-0c5781a9.js";import{V as pe}from"./VDatePicker-d18cd0f2.js";var K={exports:{}};(function(x,G){(function(C,b){x.exports=b()})(le,function(){return function(){var U={607:function(d,o,v){var g,R,w,k=this&&this.__spreadArray||function(N,e,y){if(y||arguments.length===2)for(var u=0,A=e.length,p;u<A;u++)(p||!(u in e))&&(p||(p=Array.prototype.slice.call(e,0,u)),p[u]=e[u]);return N.concat(p||Array.prototype.slice.call(e))};(function(N){if(typeof d.exports=="object"){var e=N(v(875),o);e!==void 0&&(d.exports=e)}else R=[v,o],g=N,w=typeof g=="function"?g.apply(o,R):g,w!==void 0&&(d.exports=w)})(function(N,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isCreditCard=e.isDonateCode=e.isCellPhoneBarcode=e.isCDC=e.isOriginalRC=e.isNewRC=e.isRC=e.isNI=e.isGUI=e.isCreditCardNumberValid=e.isEInvoiceDonateCodeValid=e.isEInvoiceCellPhoneBarcodeValid=e.isCitizenDigitalCertificateNumberValid=e.isOriginalResidentCertificateNumberValid=e.isNewResidentCertificateNumberValid=e.isResidentCertificateNumberValid=e.isNationalIdentificationNumberValid=e.isGuiNumberValid=void 0;function y(r,i,m){for(var _=Math.min(r.length,i.length),V=[],f=0;f<_;f++)V[f]=m(r[f],i[f]);return V}function u(r,i){return r+i}function A(r,i){return r*i}function p(r,i){if(i===void 0&&(i=!1),typeof r!="string"&&typeof r!="number")return!1;var m=[1,2,1,2,1,2,4,1],_=r.toString(),V=/^\d{8}$/;if(!V.test(_))return!1;var f=10,M=y(m,_.split("").map(function(c){return parseInt(c,f)}),A).map(function(c){return c%10+Math.floor(c/10)}).reduce(u,0),S=i?5:10;return M%S===0||parseInt(_.charAt(6),f)===7&&(M+1)%S===0}e.isGuiNumberValid=p;function s(r){if(typeof r!="string")return!1;var i=/^[A-Z][1,2]\d{8}$/;return i.test(r)&&T(r)}e.isNationalIdentificationNumberValid=s;function a(r){return typeof r!="string"?!1:t(r)||E(r)}e.isResidentCertificateNumberValid=a;function t(r){if(typeof r!="string")return!1;var i=/^[A-Z][8,9]\d{8}$/;return i.test(r)&&T(r)}e.isNewResidentCertificateNumberValid=t;function E(r){if(typeof r!="string")return!1;var i=/^[A-Z]{2}\d{8}$/;return i.test(r)&&T(r)}e.isOriginalResidentCertificateNumberValid=E;function F(r){if(typeof r!="string")return!1;var i=r.toString(),m=/^[A-Z]{2}\d{14}$/;return m.test(i)}e.isCitizenDigitalCertificateNumberValid=F;function L(r){if(typeof r!="string")return!1;var i=r.toString(),m=/^\/[\dA-Z.\-+]{7}$/;return m.test(i)}e.isEInvoiceCellPhoneBarcodeValid=L;function j(r){if(typeof r!="string"&&typeof r!="number")return!1;var i=r.toString(),m=/^[\d]{3,7}$/;return m.test(i)}e.isEInvoiceDonateCodeValid=j;function W(r,i){if(i===void 0&&(i={}),typeof r!="string")return!1;var m=/^[0-9]{12,19}$/;if(!m.test(r))return!1;var _=[/^3[47][0-9]{13}$/,/^(6541|6556)[0-9]{12}$/,/^389[0-9]{11}$/,/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,/^65[4-9][0-9]{13}|64[4-9][0-9]{13}|6011[0-9]{12}|(622(?:12[6-9]|1[3-9][0-9]|[2-8][0-9][0-9]|9[01][0-9]|92[0-5])[0-9]{10})$/,/^63[7-9][0-9]{13}$/,/^(?:2131|1800|35\d{3})\d{11}$/,/^9[0-9]{15}$/,/^(6304|6706|6709|6771)[0-9]{12,15}$/,/^(5018|5020|5038|6304|6759|6761|6763)[0-9]{8,15}$/,/^(5[1-5][0-9]{14}|2(22[1-9][0-9]{12}|2[3-9][0-9]{13}|[3-6][0-9]{14}|7[0-1][0-9]{13}|720[0-9]{12}))$/,/^(6334|6767)[0-9]{12}|(6334|6767)[0-9]{14}|(6334|6767)[0-9]{15}$/,/^(4903|4905|4911|4936|6333|6759)[0-9]{12}|(4903|4905|4911|4936|6333|6759)[0-9]{14}|(4903|4905|4911|4936|6333|6759)[0-9]{15}|564182[0-9]{10}|564182[0-9]{12}|564182[0-9]{13}|633110[0-9]{10}|633110[0-9]{12}|633110[0-9]{13}$/,/^(62[0-9]{14,17})$/,/^4[0-9]{12}(?:[0-9]{3})?$/,/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14})$/],V=i.checkIssuerRegexes,f=V===void 0?!1:V;if(f&&!_.some(function(c){return c.test(r)}))return!1;var M=r.split("").map(function(c){return parseInt(c,10)}),S=M.reverse().reduce(function(c,B,P){return P%2===0?c+B:c+(B*2>9?B*2-9:B*2)},0);return S%10===0}e.isCreditCardNumberValid=W;function T(r){var i=10,m=[1,10,19,28,37,46,55,64,39,73,82,2,11,20,48,29,38,47,56,65,74,83,21,3,12,30],_=[0,1,2,3,4,5,6,7,4,8,9,0,1,2,5,3,4,5,6,7,8,9,2,0,1,3],V=function(q,Y){return q.charCodeAt(Y)-"A".charCodeAt(0)},f=m[V(r,0)],M=isNaN(parseInt(r[1],i))?_[V(r,1)]:parseInt(r[1],i),S=r.substring(2).split("").map(function(q){return parseInt(q,i)}),c=k([f,M],S,!0),B=[1,8,7,6,5,4,3,2,1,1],P=y(c,B,A).reduce(u,0);return P%10===0}e.isGUI=p,e.isNI=s,e.isRC=a,e.isNewRC=t,e.isOriginalRC=E,e.isCDC=F,e.isCellPhoneBarcode=L,e.isDonateCode=j,e.isCreditCard=W})},875:function(d){function o(v){var g=new Error("Cannot find module '"+v+"'");throw g.code="MODULE_NOT_FOUND",g}o.keys=function(){return[]},o.resolve=o,o.id=875,d.exports=o}},C={};function b(d){var o=C[d];if(o!==void 0)return o.exports;var v=C[d]={exports:{}};return U[d].call(v.exports,v,v.exports,b),v.exports}(function(){b.o=function(d,o){return Object.prototype.hasOwnProperty.call(d,o)}})();var O=b(607);return O}()})})(K);var Ve=K.exports;const be=H.create({baseURL:"https://finalproject-back-emoshou.onrender.com"}),Ne=oe("h1",null,"註冊",-1),$e={__name:"RegisterView",setup(x){const G=J(),U=Q(),C=X(!1),b=new Date,O=ee(()=>{const s=b.getFullYear()-20,a=String(b.getMonth()+1).padStart(2,"0"),t=String(b.getDate()).padStart(2,"0");return`${s}-${a}-${t}`}),d=ue({name:D().required("姓名為必填欄位").min(2,"姓名長度不符").max(40,"姓名長度不符").test("no-numbers","姓名不能包含數字",s=>!/\d/.test(s)),idCard:D().required("身分證為必填欄位").test("is-valid-idCard","身分證格式錯誤",s=>Ve.isNationalIdentificationNumberValid(s)),birthday:de().required("生日為必填欄位").max(O.value,"必須年滿20歲"),account:D().required("帳號為必填欄位").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符"),phone:D().required("手機號碼為必填欄位").test("is-phone","手機號碼格式錯誤",s=>z.isMobilePhone(s,"zh-TW")),email:D().required("信箱為必填欄位").test("isEmail","信箱格式錯誤",s=>z.isEmail(s)),password:D().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符"),passwordConfirm:D().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符").oneOf([me("password")],"密碼不一致")}),{handleSubmit:o,isSubmitting:v}=ce({validationSchema:d}),g=I("name"),R=I("idCard"),w=I("account"),k=I("phone"),N=I("email"),e=I("password"),y=I("passwordConfirm"),u=I("birthday"),A=()=>{C.value=!1},p=o(async s=>{var a,t;try{await be.post("/users",{name:s.name,idCard:s.idCard,account:s.account,birthday:s.birthday,phone:s.phone,email:s.email,password:s.password}),U({text:"註冊成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),G.push("/")}catch(E){const F=((t=(a=E==null?void 0:E.response)==null?void 0:a.data)==null?void 0:t.message)||"發生錯誤，請稍後再試";U({text:F,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(s,a)=>(re(),ae(ge,null,{default:$(()=>[l(Ce,null,{default:$(()=>[l(Z,{cols:"12"},{default:$(()=>[Ne]),_:1}),l(ve),l(Z,{cols:"12"},{default:$(()=>[l(fe,{disabled:n(v),onSubmit:te(n(p),["prevent"])},{default:$(()=>[l(h,{modelValue:n(R).value.value,"onUpdate:modelValue":a[0]||(a[0]=t=>n(R).value.value=t),label:"身分證","error-messages":n(R).errorMessage.value,"prepend-icon":"mdi-id-card"},null,8,["modelValue","error-messages"]),l(h,{modelValue:n(g).value.value,"onUpdate:modelValue":a[1]||(a[1]=t=>n(g).value.value=t),label:"姓名","error-messages":n(g).errorMessage.value,"prepend-icon":"mdi-id-card"},null,8,["modelValue","error-messages"]),l(h,{modelValue:n(u).value.value,"onUpdate:modelValue":a[2]||(a[2]=t=>n(u).value.value=t),label:"生日","error-messages":n(u).errorMessage.value,readonly:"readonly","prepend-icon":"mdi-calendar","onClick:prepend":a[3]||(a[3]=t=>C.value=!C.value)},null,8,["modelValue","error-messages"]),l(ie,{modelValue:C.value,"onUpdate:modelValue":a[6]||(a[6]=t=>C.value=t),persistent:"","max-width":"290px","onClick:outside":A},{default:$(()=>[l(pe,{modelValue:n(u).value.value,"onUpdate:modelValue":a[4]||(a[4]=t=>n(u).value.value=t),color:"#F8B44B",max:O.value,onInput:a[5]||(a[5]=t=>C.value=!1)},null,8,["modelValue","max"])]),_:1},8,["modelValue"]),l(h,{modelValue:n(w).value.value,"onUpdate:modelValue":a[7]||(a[7]=t=>n(w).value.value=t),label:"帳號",minlength:"4",maxlength:"20",counter:"counter","error-messages":n(w).errorMessage.value,"prepend-icon":"mdi-account"},null,8,["modelValue","error-messages"]),l(h,{modelValue:n(k).value.value,"onUpdate:modelValue":a[8]||(a[8]=t=>n(k).value.value=t),label:"手機號碼",type:"tel","error-messages":n(k).errorMessage.value,"prepend-icon":"mdi-phone"},null,8,["modelValue","error-messages"]),l(h,{modelValue:n(N).value.value,"onUpdate:modelValue":a[9]||(a[9]=t=>n(N).value.value=t),label:"信箱",type:"email","error-messages":n(N).errorMessage.value,"prepend-icon":"mdi-email"},null,8,["modelValue","error-messages"]),l(h,{modelValue:n(e).value.value,"onUpdate:modelValue":a[10]||(a[10]=t=>n(e).value.value=t),label:"密碼",type:"password",minlength:"4",maxlength:"20",counter:"counter","error-messages":n(e).errorMessage.value,"prepend-icon":"mdi-security"},null,8,["modelValue","error-messages"]),l(h,{modelValue:n(y).value.value,"onUpdate:modelValue":a[11]||(a[11]=t=>n(y).value.value=t),label:"確認密碼",type:"password",minlength:"4",maxlength:"20",counter:"counter","error-messages":n(y).errorMessage.value,"prepend-icon":"mdi-security"},null,8,["modelValue","error-messages"]),l(ne,{type:"submit",color:"#F8B44B"},{default:$(()=>[se("註冊")]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{$e as default};
